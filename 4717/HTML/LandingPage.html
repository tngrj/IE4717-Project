<!-- Week6
    1) ADD PHONE NUMBER & ALLERGY, @JS, MYSQL side also
    2) CHANGE PATIENT USERTYPE TO JS SIDE FOR REGISTER FUNCTION NT IN API SIDE, @API SIDE CHANGE LOGIN TO GET DATA FROM TWO TABLES & IF STATMENT TO SEE SAVE IN WHICH TABLE 
-->

<!-- 1) Forms Validation & API(PHP)
     2) Change the CSS; 
        - change & add image: logo, landingpage1
        - popoutforms: login & signup - back btn, font type, spacing&colour
     3) Enhance the CSS
-->
<!DOCTYPE html>
<html lang="en">
	<!-- ------------------------------- HEAD ------------------------------------- -->
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="csrf-param" content="_csrf" />
		<title>Go Doc</title>
		<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
		<link rel="stylesheet" href="CSS/style.css" />
		<link rel="icon" href="CSS/LogoIcon.png" />
		<style>
			h1 {
				font-size: 60px;
			}
			h2 {
				color: #000;
				font-family: Nunito;
				font-size: 34px;
				font-style: normal;
				font-weight: 700;
				line-height: normal;
			}
		</style>

		<script src="JS/script.js"></script>
	</head>
	<!-- --------------------------- HEAD --------------------------------------- -->

	<!-- 
------------------------------- BODY ------------------------------------- -->
	<body>
		<!-----FORM----------------------------------------------------------------->
		<!--  <div id='loginbody'>
      <h1 style='font-family:Times New Roman, Times, serif; padding-left: 100px;'>Login</h1>
      <p style='font-family:Times New Roman, Times, serif; padding-left: 100px;'>Please fill out the following fields to login:</p>
      <br>
      <form id="loginForm" action="/login" method="POST">
            <label class='col-lg-1 control-label' for='email'>Username</label>
            <div class='col-lg-3'><input type='text' name='email' id='email' autofocus required aria-required="true"></div>
            <label class='col-lg-1 control-label' for='password'>Password</label>
            <div class='col-lg-3'><input type='password' name='password' id='password' required aria-required="true"></div>
            <div class='col-lg-offset-1 col-lg-3'>
                <input type='hidden' name='rememberme' value='0'>
                <input type='checkbox' name='rememberme' id='rememberme' value='1' checked> 
                <label for='rememberme'>Remember Me</label>
            </div>
            <br>
            <div class='col-lg-offset-1 col-lg-11'><button type='submit' class='btn btn-primary' id='submitLogin' onclick="login()">Login</button></div>
      </form> 
  </div>
-->
		<!-----END: FORM------------------------------------------------------------>

		<div class="landing-content">
			<h1>Go Doc</h1>
			<br /><br />
			<lottie-player
				src="CSS/animation_lmzcv7t2.json"
				background="transparent"
				speed="1"
				style="width: 300px; height: 300px"
				loop
				autoplay
			></lottie-player>
			<hr />
			<br />
			<button type="submit" id="landingLoginBtn" onclick="landingPage(landingLogin);">
				Login with Email</button
			><br /><br />
			<p style="display: inline-block">
				Don't have an account?
				<button type="submit" id="landingSignUpBtn" onclick="landingPage(landingSignUp);">
					Sign Up
				</button>
			</p>
		</div>

		<div id="landingLogin" class="hidden">
			<h2>Login</h2>
			<br />
			<form id="landingLoginForm" action="php/login.php" method="POST">
				<label for="username">Email</label><br />
				<input type="email" name="username" /><br /><br />
				<label for="password">Password</label><br />
				<input type="password" name="password" /><br /><br /><br />
				<button type="submit" id="LoginBtn">Login</button>
			</form>
			<button id="closeBtn" onclick="closePopup(landingLogin);">Back</button>
		</div>

		<div class="hidden" id="landingSignUp">
			<h2>Register</h2>
			<br />
			<form id="landingSignUpForm" action="php/createPatient.php" method="POST">
				<label for="addfirstname">Name</label><br />
				<input type="text" name="addfirstname" placeholder="First Name" required /><br />
				<input type="text" name="addlastname" placeholder="Last Name" required /><br /><br />
				<label for="adddob">Date of Birth</label><br />
				<input type="date" name="adddob" required /><br /><br />
				<label for="addemail">Email</label><br />
				<input type="text" name="addemail" required /><br /><br />
				<label for="addpassword">Password</label><br />
				<input type="password" name="addpassword" required /><br /><br /><br />
				<button type="submit" id="SignUpBtn">Register</button>
			</form>
			<button id="closeBtn" onclick="closePopup(landingSignUp);">Back</button>
		</div>

		<script>
			const urlParams = new URLSearchParams(window.location.search);
			const email = urlParams.get('open');
			if (email) {
				landingPage(landingLogin);
				if (email == 'landingLogin') {
					document.getElementById('username').focus();
				} else {
					document.getElementById('username').value = email;
					document.getElementById('password').focus();
				}
			}

			function landingPage(formDiv) {
				formDiv.style.display = 'block';
				document.body.classList.add('overlay');
			}

			function closePopup(formDiv) {
				formDiv.style.display = 'none';
				document.body.classList.remove('overlay');

				var inputElements = formDiv.querySelectorAll('input');
				inputElements.forEach(function (input) {
					input.value = '';
				});
			}

			function getParameterByName(name, url) {
				if (!url) url = window.location.href;
				name = name.replace(/[\[\]]/g, '\\$&');
				var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
					results = regex.exec(url);
				if (!results) return null;
				if (!results[2]) return '';
				return decodeURIComponent(results[2].replace(/\+/g, ' '));
			}

			var message = getParameterByName('message');
			if (message) {
				popoutOne();
			}
		</script>
	</body>
	<!-- --------------------------- BODY --------------------------------------- -->

	<!-- ------------------------------- FOOTER ----------------------------------- -->
	<br /><br /><br /><br /><br />
	<!--
<footer class="footer">
  <div class="container">
    <p class="pull-left">&copy; CLINIC 2023</p>
  </div>
</footer>
-->
	<!-- --------------------------- FOOTER ------------------------------------- -->
</html>
